<HTML>
<HEAD>
<TITLE>Acro User Manual Version Version 1.0</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<!-- Generated by Doxygen 1.3.9.1 -->
<h2><a class="anchor" name="configurationAppendix">
Configuration</a></h2>
<h3><a class="anchor" name="ConfigurationOverview">
Overview</a></h3>
The <b>configure</b> script automates much of the setup activity associated with building large suites of programs like Acro on various hardware platforms. This includes <ol>
<li>
making symbolic links so that files used for configuration can be accessed from one location<p>
</li>
<li>
generating Makefiles so that objects, libraries, executables and other 'targets' can be created for specific and unique hardware platforms<p>
</li>
<li>
calling itself recursively so that sub-directories can also be configured </li>
</ol>
There are a number of configuration options that can be used to customize the installation. The core parameter list for the <b>configure</b> script is: <div class="fragment"><pre class="fragment">
   configure hosttype [--target=target] [--srcdir=dir] [--rm]
                      [--site=site] [--prefix=dir] [--exec-prefix=dir]
                      [--program-prefix=string] [--tmpdir=dir]
                      [--with-package[=yes/no]] [--without-package]
                      [--enable-feature[=yes/no]] [--disable-feature]
                      [--norecursion] [--nfp] [-s] [-v] [-V | --version]
                      [--help]
</pre></div>Many of these options are not necessary since system information can be often acquired from your local machine. Refer to the Cygnus <b>configure</b> documentation for complete information.<h3><a class="anchor" name="ConfigurationOptions">
Standard Options</a></h3>
The following options are either commonly used or specific to Acro packages:<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>[--with-compiler=&lt;gcc,CC&gt;] </td><td>Sets up a specific compiler; The native compiler is the default.  <p>
</td></tr>
<tr>
<td>[--target=&lt;solaris&gt;]  </td><td>Optional flag to specify the target machine that you are cross-compiling for.  <p>
</td></tr>
<tr>
<td>[--site=&lt;snl980&gt;]  </td><td>Specifies the site-specific locations for MPI, etc.  <p>
</td></tr>
<tr>
<td>[--with-debugging]  </td><td>Turns on the DEBUGGING macro and sets the OPTIMIZATION macro to &lt;flag&gt; (code is compiled with -g by default).  <p>
</td></tr>
<tr>
<td>[--with-mpi]  </td><td>Turns on the use of the MPI package.  <p>
</td></tr>
<tr>
<td>[--with-mpe]  </td><td>Turns on the use of the MPE package.  <p>
</td></tr>
<tr>
<td>[--with-swig]  </td><td>Enables the use of swig to wrap Acro packages for use with the Python scripting language.  <p>
</td></tr>
<tr>
<td>[--with-static]  </td><td>Enables the compilation of statically linked libraries (the default).  <p>
</td></tr>
<tr>
<td>[--with-insure]  </td><td>Enables the compilation with the insure++ debugging tool.  <p>
</td></tr>
<tr>
<td>[--with-shared]  </td><td>Enables the compilation of dynamically linked libraries, which can be shared.  <p>
</td></tr>
<tr>
<td>[--with-optimization=&lt;level&gt;]  </td><td>Sets the optimization level used when compiling the source files. This is overridden by the --with-debugging flag.  <p>
</td></tr>
<tr>
<td>[--with-gprof]  </td><td>Sets the compiler to use flags that force executables to dump output files that can be read by the unix <b>gprof</b> utility to profile the code.  <p>
</td></tr>
</table>
<h3><a class="anchor" name="ConfigurationDetails">
Details of the Configuration Process</a></h3>
The <b>configure</b> script creates Makefiles from <b>Makefile.in</b> template files, which outline the basic `targets' that need to get built. This script can be customized using the <b>configure.in</b> file. Variables that are package, site or hardware dependent are stored in individual `fragment' files. These `fragment' files are added to the custom created Makefiles using the host, target, package and/or site parameters. After the <b>configure</b> command is completed, three files will be generated in each configured directory.<p>
<ol>
<li>
Makefile-${target}<p>
The suffix, ${target}, will depend on the target architecture, which defaults to the host architecture; native builds have identical host and target values.<p>
</li>
<li>
Makefile<p>
This will be a symbolic link to <b>Makefile-${target}</b>. Consequently, when <b>make</b> is executed, the default behavior is to use the last generated Makefile-${target} file.<p>
</li>
<li>
config.status<p>
A `recording' of the configuration process (i.e., what configure options were used to generate the current makefile). </li>
</ol>
<p>
Running <b>configure</b> takes a while, so be patient. Verbose output will always be displayed unless the parameter `--silent' is used. Further, the parameter '--norecursion' can be used to configure only the current directory. All generated <b>config.status</b> files include this parameter as a default for easy makefile re-generation; after editing a <b>Makefile.in</b> file, you can construct the associate Makefile file by executing <b>config.status</b>.<p>
The <b>configure</b> command supports multi-platform environments using Makefile fragment files. The fragment files for these platforms and for the packages that Acro relies on are located in the <b>acro/config</b> directory. There are five types of files in this directory: <div class="fragment"><pre class="fragment">
    mh-&lt;host&gt;
    Fragments that define the utilities provided by the host (e.g. the
    definition of MAKE).

    mp-&lt;target&gt;-&lt;site&gt;
    Fragments that define information for the packages that are used by
    Acro (e.g. MPI).

    ms-&lt;site&gt;
    Fragments that define the site-specific general configuration
    information. If this does not exist for a given site, then the
    default ms-default fragment is used.

    mt-&lt;target&gt;
    Fragments needed to specfy how to compile code for a target
    architecture (e.g. compiler name/location).

    mf-&lt;host&gt;-&lt;target&gt;-&lt;site&gt;
    Automatically generated by the configure scripts.
</pre></div><h3><a class="anchor" name="ConfigurationPlatforms">
Platforms Supported</a></h3>
Acro can be configured for code development and execution on the following platforms: <div class="fragment"><pre class="fragment">
    SUN		Solaris 2.8		CC v5.4		solaris
    PC		Red Hat LINUX 9		g++ v3.2.2	linux
    SGI		IRIX 6.5		CC v7.41	irix
    DEC		OSF 5.1			cxx v6.3-002	osf
    IBM		AIX 5.1			xlC v6		aix
    TFLOP	Cougar (compute)	ciCC v4.4.0	cougar
    TFLOP	OS (service)		iCC  v4.4.0	tflop
    Cplant	Compute OS		c++		cplant
    Cplant  	Service OS		g++		cplant
    PC		Windows (Cygwin)	g++		cygwin
    Mac		OSX (Darwin)		g++		darwin
    HP		HP-UX 10.20		CC		hpux
</pre></div>The last column shows the configuration target used to configure Makefiles for each of these systems.<p>
The standard configure and build process described in Section <a class="el" href="install.html#install">Installation</a> works on almost all of these platforms. A noteable exception are cougar builds, which generate executables for the ASCI Red compute nodes. These builds need to performed with a cross-compiler. For example, when building on sasn100.sandia.gov, you would configure as follows: <div class="fragment"><pre class="fragment">
    ./configure --site=sasn100 --target=cougar
</pre></div></BODY>
</HTML>
